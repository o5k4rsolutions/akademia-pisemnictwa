<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Akademia Pisemnictwa - Klub Plik贸w</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f7f9fb; }
        .hero-bg { background-image: linear-gradient(135deg, #10b981 0%, #059669 100%); }
        .btn-primary { transition: all 0.2s; }
        .btn-primary:hover { box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4); }
        .input-field:focus { border-color: #10b981; box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.3); }
        #view-container { transition: opacity 0.4s ease-in-out; }
    </style>
</head>
<body>

    <div id="app" class="min-h-screen flex flex-col">
        <div id="loading-overlay" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center hidden z-50">
            <div class="bg-white p-6 rounded-lg shadow-xl flex items-center">
                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-emerald-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <span id="loading-text">adowanie...</span>
            </div>
        </div>

        <header class="bg-white shadow-md">
            <nav class="container mx-auto px-4 py-4 flex justify-between items-center">
                <a href="#" onclick="navigateTo('home')" class="text-2xl font-bold text-emerald-600">Akademia Pisemnictwa</a>
                <div class="flex items-center space-x-4">
                    <a href="#" id="dashboard-link" onclick="navigateTo('dashboard')" class="text-gray-700 hover:text-emerald-600 font-medium hidden">Panel G贸wny</a>
                    <a href="#" id="files-link" onclick="checkVerificationStatus(true)" class="text-gray-700 hover:text-emerald-600 font-medium hidden">Klub Nauczyciela</a>

                    <span id="user-display" class="hidden text-gray-700 text-sm font-medium"></span>
                    <button id="auth-button" class="bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-150 ease-in-out" onclick="handleAuthClick()">
                        Zaloguj si
                    </button>
                </div>
            </nav>
        </header>

        <main class="flex-grow container mx-auto px-4 py-8">
            <div id="view-container">
            </div>
        </main>

        <footer class="bg-gray-800 text-white py-4 text-center">
            <p class="text-sm">&copy; 2024 Akademia Pisemnictwa. Wszelkie prawa zastrze偶one.</p>
        </footer>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        
        const firebaseConfig = {
            apiKey: "AIzaSyDrp3PAn31CvEeNNjEdRo_5oxpmIeL8T5Q",
            authDomain: "akademia-pisemnictwa.firebaseapp.com",
            projectId: "akademia-pisemnictwa",
            storageBucket: "akademia-pisemnictwa.firebasestorage.app",
            messagingSenderId: "743127115663",
            appId: "1:743127115663:web:4e89d5bcc1b00c8eef0dfa",
            measurementId: "G-4K3TK9XLLR"
        };
        
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        const FORMSPREE_URL = 'https://formspree.io/f/mkgkwena';

        let app, db, auth;
        let userId = null;
        let isAuthReady = false;
        let userProfile = null;
        let currentView = 'home';

        const viewContainer = document.getElementById('view-container');
        const authButton = document.getElementById('auth-button');
        const userDisplay = document.getElementById('user-display');
        const loadingOverlay = document.getElementById('loading-overlay');
        const loadingText = document.getElementById('loading-text');

        const setLoading = (show, text = 'adowanie...') => {
            loadingText.textContent = text;
            loadingOverlay.classList.toggle('hidden', !show);
        };

        const getUserProfileRef = (uid) => {
            return doc(db, `artifacts/${appId}/users/${uid}/academy_profiles/data`);
        }

        const setupFirebase = async () => {
            navigateTo('home');
            try {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);

                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                onAuthStateChanged(auth, (user) => {
                    userId = user ? user.uid : null;
                    isAuthReady = true;
                    if (user && user.email) {
                        listenToUserProfile(user.uid);
                    } else {
                        userProfile = null;
                        updateAuthUI(user);
                        if (currentView !== 'home') {
                            navigateTo('home');
                        }
                    }
                });

            } catch (error) {
                console.error("Bd inicjalizacji Firebase:", error);
                setLoading(false);
                alertMessage(`Bd inicjalizacji: ${error.message}. Sprawd藕 konfiguracj Firebase.`);
            }
        };

        const listenToUserProfile = (uid) => {
            const profileRef = getUserProfileRef(uid);
            onSnapshot(profileRef, (docSnap) => {
                if (docSnap.exists()) {
                    userProfile = docSnap.data();
                    checkVerificationStatus(false);
                } else {
                    userProfile = null;
                    if (auth.currentUser && !auth.currentUser.isAnonymous) {
                         navigateTo('home');
                    } else {
                        navigateTo('home');
                    }
                }
                updateAuthUI(auth.currentUser);
                setLoading(false);
            }, (error) => {
                console.error("Bd nasuchiwania Firestore:", error);
                setLoading(false);
            });
        };

        const checkVerificationStatus = (forceVerificationCheck = false) => {
            if (!auth.currentUser) {
                navigateTo('home');
                return;
            }

            if (userProfile && userProfile.verificationStatus === 'verified') {
                navigateTo('filesClub');
            } else if (userProfile) { 
                if (forceVerificationCheck) {
                    navigateTo('verificationStatusCheck');
                } else {
                    navigateTo('dashboard');
                }
            } else {
                navigateTo('home');
            }
        };

        const updateAuthUI = (user) => {
            const dashboardLink = document.getElementById('dashboard-link');
            const filesLink = document.getElementById('files-link');

            if (user && userProfile) {
                authButton.textContent = 'Wyloguj';
                authButton.onclick = signOutUser;
                userDisplay.textContent = `Witaj, ${userProfile.fullName.split(' ')[0]}!`;
                userDisplay.classList.remove('hidden');
                
                dashboardLink.classList.remove('hidden');
                filesLink.classList.remove('hidden');
            } else {
                authButton.textContent = 'Zaloguj si';
                authButton.onclick = () => navigateTo('auth');
                userDisplay.classList.add('hidden');
                userDisplay.textContent = '';
                
                if (dashboardLink) dashboardLink.classList.add('hidden');
                if (filesLink) filesLink.classList.add('hidden');
            }
        };

        const handleAuthClick = () => {
            if (auth.currentUser && userProfile) {
                signOutUser();
            } else {
                navigateTo('auth');
            }
        };
        
        const alertMessage = (message) => {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-red-600 text-white p-4 rounded-lg shadow-xl z-[999] opacity-0 transition-opacity duration-300';
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => { notification.classList.add('opacity-100'); }, 10);
            setTimeout(() => { notification.classList.remove('opacity-100'); }, 4000);
            setTimeout(() => { notification.remove(); }, 5000);
        };

        window.navigateTo = (view) => {
            currentView = view;
            render();
            window.scrollTo(0, 0);
        };
        
        const renderHomeView = () => `
            <div class="hero-bg text-white p-12 md:p-20 rounded-xl shadow-2xl text-center">
                <h1 class="text-4xl md:text-6xl font-extrabold mb-4">Akademia Pisemnictwa</h1>
                <p class="text-xl md:text-2xl mb-8 font-light">Twoje 藕r贸do profesjonalnych materia贸w do nauki pisania wypracowa.</p>
                
                <p class="text-lg mb-10 font-medium text-emerald-100 max-w-2xl mx-auto">
                    Akademia Pisemnictwa to platforma stworzona z myl o <b>nauczycielach jzyka polskiego</b>. Dostarczamy gotowe, sprawdzone materiay dydaktyczne, w tym <b>checklisty i szablony</b>, kt贸re uatwiaj weryfikacj wiedzy i umiejtnoci pisarskich uczni贸w.
                </p>

                <button onclick="navigateTo('auth')" class="bg-white text-emerald-600 font-bold py-3 px-8 rounded-full text-lg uppercase tracking-wider btn-primary">
                    Docz do Klubu Plik贸w
                </button>
            </div>

            <div class="grid md:grid-cols-3 gap-8 mt-12">
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-emerald-500">
                    <h3 class="text-xl font-semibold mb-3 text-gray-800">Baza Wypracowa</h3>
                    <p class="text-gray-600">Gotowe szablony i analizy lektur, dostosowane do wymaga egzaminacyjnych.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-emerald-500">
                    <h3 class="text-xl font-semibold mb-3 text-gray-800">Checklisty Oceniania</h3>
                    <p class="text-gray-600">Dokadne listy kontrolne dla nauczycieli i uczni贸w, uatwiajce sprawdzanie prac.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-emerald-500">
                    <h3 class="text-xl font-semibold mb-3 text-gray-800">Webinary i Kursy</h3>
                    <p class="text-gray-600">Dostp do archiwalnych nagra z warsztat贸w dla polonist贸w.</p>
                </div>
            </div>
        `;

        const renderAuthView = (isRegister = false) => `
            <div id="auth-card" class="max-w-md mx-auto bg-white p-8 rounded-xl shadow-2xl">
                <h2 class="text-3xl font-bold mb-6 text-center text-gray-800">${isRegister ? 'Zarejestruj si' : 'Zaloguj si'}</h2>
                <form id="auth-form">
                    ${isRegister ? `
                        <input type="text" id="fullName" placeholder="Imi i nazwisko" required class="input-field w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none"/>
                        <input type="email" id="email" placeholder="E-mail" required class="input-field w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none"/>
                        <input type="tel" id="phone" placeholder="Numer telefonu (opcjonalnie)" class="input-field w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none"/>
                        <input type="password" id="password" placeholder="Haso" required class="input-field w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none"/>
                        <input type="password" id="confirmPassword" placeholder="Powt贸rz haso" required class="input-field w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none"/>
                        <button type="submit" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-4 rounded-lg btn-primary shadow-md">
                            Zarejestruj i Popro o Weryfikacj
                        </button>
                    ` : `
                        <input type="email" id="loginEmail" placeholder="E-mail" required class="input-field w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none"/>
                        <input type="password" id="loginPassword" placeholder="Haso" required class="input-field w-full p-3 mb-6 border border-gray-300 rounded-lg focus:outline-none"/>
                        <button type="submit" class="w-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-3 px-4 rounded-lg btn-primary shadow-md">
                            Zaloguj si
                        </button>
                    `}
                </form>
                <div class="mt-6 text-center">
                    ${isRegister ? `
                        <p class="text-sm text-gray-600">Masz ju偶 konto? <a href="#" onclick="switchAuthMode(false)" class="text-emerald-600 hover:text-emerald-700 font-semibold">Zaloguj si</a></p>
                    ` : `
                        <p class="text-sm text-gray-600">Nie masz konta? <a href="#" onclick="switchAuthMode(true)" class="text-emerald-600 hover:text-emerald-700 font-semibold">Zarejestruj si</a></p>
                    `}
                </div>
            </div>
        `;

        const renderDashboardView = () => {
            const userName = userProfile ? userProfile.fullName.split(' ')[0] : 'U偶ytkowniku';
            return `
                <div class="bg-white p-8 rounded-xl shadow-2xl border-t-4 border-emerald-600 text-center">
                    <h2 class="text-4xl font-bold mb-4 text-gray-800">Witaj, ${userName}!</h2>
                    <p class="text-xl text-gray-600 mb-8">Jak Ci mija dzisiejszy dzie?</p>
                    <p class="text-gray-500">Przejd藕 do <b>Klubu Nauczyciela</b>, aby uzyska dostp do materia贸w, lub poczekaj na weryfikacj konta.</p>
                    <button onclick="checkVerificationStatus(true)" class="mt-6 bg-emerald-600 hover:bg-emerald-700 text-white font-semibold py-2 px-6 rounded-lg btn-primary shadow-md">
                        Przejd藕 do Klubu Nauczyciela
                    </button>
                </div>
            `;
        };

        const renderVerificationStatusView = () => {
            const isPending = userProfile && userProfile.verificationStatus === 'pending';
            const userName = userProfile ? userProfile.fullName.split(' ')[0] : 'U偶ytkowniku';
            
            let title, messageHtml;

            if (isPending) {
                title = 'Trwa weryfikacja konta';
                messageHtml = `
                    <p class="text-gray-700 mb-4">Tw贸j wniosek zosta przyjty do weryfikacji. Proces ten potrwa do <b>5 dni roboczych</b>. O pozytywnej weryfikacji poinformujemy Ci mailowo.</p>
                `;
            } else {
                title = 'Konto Wymaga Weryfikacji';
                messageHtml = `
                    <p class="text-gray-700 font-medium mb-4">Twoje konto nie zostao zweryfikowane. Skontaktuj si z nami w celu wyjanienia statusu.</p>
                `;
            }

            const sharedContactHtml = `
                <p class="font-semibold text-gray-800 mt-4 mb-2">Skontaktuj si z nami:</p>
                <ul class="list-disc list-inside space-y-1 text-sm text-gray-600">
                    <li><span class="font-medium text-emerald-600">Sprawy weryfikacji konta:</span> <a href="mailto:weryfikacja.osc4r@hub.pl" class="text-blue-600 hover:underline">weryfikacja.osc4r@hub.pl</a></li>
                    <li><span class="font-medium text-emerald-600">Inne zapytania:</span> <a href="mailto:centrumobslugiklienta@osc4r.hub.pl" class="text-blue-600 hover:underline">centrumobslugiklienta@osc4r.hub.pl</a></li>
                </ul>
                <p class="mt-4 text-sm text-gray-500">Odpowiemy w cigu 5 dni roboczych.</p>
            `;


            return `
                <div class="max-w-xl mx-auto bg-white p-10 rounded-xl shadow-2xl border-l-4 border-yellow-500 text-center">
                    <svg class="w-16 h-16 text-yellow-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                    <h2 class="text-3xl font-bold mb-4 text-gray-800">${title}</h2>
                    <p class="text-gray-600 mb-6 text-lg">Witaj, <b>${userName}</b>!</p>
                    
                    <div class="text-left bg-gray-50 p-6 rounded-lg border border-gray-200">
                        ${messageHtml}
                        ${sharedContactHtml}
                    </div>

                    <button onclick="signOutUser()" class="mt-8 text-sm text-red-500 hover:text-red-700 transition">Wyloguj</button>
                </div>
            `;
        };

        const renderFilesClubView = () => `
            <div class="bg-white p-8 rounded-xl shadow-2xl border-t-4 border-emerald-600">
                <h2 class="text-4xl font-bold mb-6 text-emerald-700"> Klub Plik贸w - Strefa Premium</h2>
                <p class="text-lg text-gray-700 mb-8">Witaj w miejscu, gdzie znajdziesz sprawdzone, gotowe do u偶ycia materiay. Dostp tylko dla zweryfikowanych czonk贸w.</p>

                <div class="grid md:grid-cols-2 gap-6">
                    <div class="bg-gray-50 p-5 rounded-lg border border-gray-200 hover:shadow-md transition duration-150">
                        <h3 class="text-2xl font-semibold mb-2 text-gray-800">Egzamin smoklasisty: Analiza Lektur</h3>
                        <p class="text-gray-600">Szczeg贸owe streszczenia, motywy i gotowe tezy do najczciej spotykanych lektur. Format PDF.</p>
                        <a href="#" class="mt-3 inline-block text-emerald-600 font-medium hover:underline">Pobierz plik PDF (2.5 MB)</a>
                    </div>
                    <div class="bg-gray-50 p-5 rounded-lg border border-gray-200 hover:shadow-md transition duration-150">
                        <h3 class="text-2xl font-semibold mb-2 text-gray-800">10 Szablon贸w Wypracowa Wnioskujcych</h3>
                        <p class="text-gray-600">Struktury logiczne do tworzenia przekonujcych argument贸w. Plik DOCX/ODT.</p>
                        <a href="#" class="mt-3 inline-block text-emerald-600 font-medium hover:underline">Pobierz plik DOCX (0.8 MB)</a>
                    </div>
                    <div class="bg-gray-50 p-5 rounded-lg border border-gray-200 hover:shadow-md transition duration-150">
                        <h3 class="text-2xl font-semibold mb-2 text-gray-800">Checklista do Oceny Eseju</h3>
                        <p class="text-gray-600">Kompleksowa lista kryteri贸w oceniania dla nauczycieli i samooceny dla uczni贸w.</p>
                        <a href="#" class="mt-3 inline-block text-emerald-600 font-medium hover:underline">Otw贸rz Arkusz Google</a>
                    </div>
                    <div class="bg-gray-50 p-5 rounded-lg border border-gray-200 hover:shadow-md transition duration-150">
                        <h3 class="text-2xl font-semibold mb-2 text-gray-800">Wideo: Jak Pisa Wstp?</h3>
                        <p class="text-gray-600">Nagranie wideo z kursu o skutecznym i anga偶ujcym wstpie do ka偶dej pracy pisemnej.</p>
                        <a href="#" class="mt-3 inline-block text-emerald-600 font-medium hover:underline">Obejrzyj Wideo</a>
                    </div>
                </div>
            </div>
        `;

        const render = () => {
            viewContainer.style.opacity = '0';
            
            let htmlContent;
            switch (currentView) {
                case 'home':
                    htmlContent = renderHomeView();
                    break;
                case 'auth':
                    htmlContent = renderAuthView(false); 
                    break;
                case 'dashboard':
                    htmlContent = renderDashboardView();
                    break;
                case 'verificationStatusCheck':
                    htmlContent = renderVerificationStatusView();
                    break;
                case 'filesClub':
                    if (userProfile && userProfile.verificationStatus === 'verified') {
                        htmlContent = renderFilesClubView();
                    } else {
                        if (auth.currentUser) {
                            navigateTo('verificationStatusCheck');
                        } else {
                            navigateTo('home');
                        }
                    }
                    break;
                default:
                    htmlContent = renderHomeView();
            }
            viewContainer.innerHTML = htmlContent;
            
            setTimeout(() => {
                viewContainer.style.opacity = '1';
                
                if (currentView === 'auth') {
                    document.getElementById('auth-form').addEventListener('submit', handleAuthFormSubmit);
                }
            }, 10);
        };

        window.switchAuthMode = (isRegister) => {
            const authCard = document.getElementById('auth-card');
            authCard.innerHTML = renderAuthView(isRegister).match(/<form[\s\S]*<\/div>/)[0];
            document.getElementById('auth-form').addEventListener('submit', handleAuthFormSubmit);
        };

        const handleAuthFormSubmit = async (event) => {
            event.preventDefault();
            const form = event.target;
            
            if (form.querySelector('#fullName')) {
                const fullName = form.querySelector('#fullName').value.trim();
                const email = form.querySelector('#email').value.trim();
                const phone = form.querySelector('#phone').value.trim();
                const password = form.querySelector('#password').value;
                const confirmPassword = form.querySelector('#confirmPassword').value;

                if (password.length < 6) {
                    alertMessage('Haso musi mie co najmniej 6 znak贸w.');
                    return;
                }
                if (password !== confirmPassword) {
                    alertMessage('Hasa nie s identyczne!');
                    return;
                }
                
                await registerUser({ fullName, email, phone, password });

            } else {
                const email = form.querySelector('#loginEmail').value.trim();
                const password = form.querySelector('#loginPassword').value;
                
                await loginUser(email, password);
            }
        };

        const sendFormspreeNotification = async (userData) => {
            setLoading(true, "Wysyanie powiadomienia...");
            try {
                const response = await fetch(FORMSPREE_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({
                        'Weryfikacja': 'NOWA REJESTRACJA WYMAGAJCA WERYFIKACJI',
                        'Imi i Nazwisko': userData.fullName,
                        'Email': userData.email,
                        'Numer Telefonu': userData.phoneNumber || 'Brak',
                        'Data Rejestracji': new Date().toLocaleString('pl-PL'),
                        'Status': 'PENDING'
                    })
                });

                if (response.ok) {
                } else {
                    console.error("Bd wysyania Formspree:", response.statusText);
                }
            } catch (error) {
                console.error("Bd sieci Formspree:", error);
            } finally {
                setLoading(false);
            }
        };

        const registerUser = async (data) => {
            setLoading(true, "Tworzenie konta...");
            
            try {
                const userCredential = await createUserWithEmailAndPassword(auth, data.email, data.password);
                const uid = userCredential.user.uid;

                const userData = {
                    fullName: data.fullName,
                    email: data.email,
                    phoneNumber: data.phone || null,
                    registrationDate: new Date().toISOString(),
                    verificationStatus: 'pending'
                };
                
                await setDoc(getUserProfileRef(uid), userData);

                await sendFormspreeNotification(userData);

                setLoading(false);

            } catch (error) {
                setLoading(false);
                let errorMessage = 'Wystpi nieznany bd podczas rejestracji.';
                if (error.code === 'auth/email-already-in-use') {
                    errorMessage = 'Ten adres e-mail jest ju偶 zarejestrowany.';
                } else if (error.code === 'auth/weak-password') {
                    errorMessage = 'Haso jest za sabe. U偶yj co najmniej 6 znak贸w.';
                } else {
                    console.error("Bd rejestracji:", error);
                    errorMessage = `Bd Firebase: ${error.message}`;
                }
                alertMessage(errorMessage);
                if (auth.currentUser && !auth.currentUser.isAnonymous) {
                     await signOut(auth);
                }
            }
        };

        const loginUser = async (email, password) => {
            setLoading(true, "Logowanie...");
            try {
                await signInWithEmailAndPassword(auth, email, password);
            } catch (error) {
                setLoading(false);
                console.error("Bd logowania:", error);
                let errorMessage = 'Bd logowania. Sprawd藕 e-mail i haso.';
                if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password' || error.code === 'auth/invalid-credential') {
                    errorMessage = 'Nieprawidowy adres e-mail lub haso.';
                }
                alertMessage(errorMessage);
            }
        };

        window.signOutUser = async () => {
            setLoading(true, "Wylogowywanie...");
            try {
                await signOut(auth);
                userProfile = null;
            } catch (error) {
                console.error("Bd wylogowania:", error);
                alertMessage(`Bd wylogowania: ${error.message}`);
            } finally {
                setLoading(false);
            }
        };

        window.onload = setupFirebase;

    </script>
</body>
</html>
